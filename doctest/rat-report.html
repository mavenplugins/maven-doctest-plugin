<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Dec 5, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>RAT (Release Audit Tool) results</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
        <style>body{padding-top: 20px;}</style>
    
    <script type="text/javascript" src="./js/apache-maven-fluido.min.js"></script>

    
    <meta name="Date-Revision-yyyymmdd" content="20121205" />
    <meta http-equiv="Content-Language" content="en" />
    
        </head>
  <body>
        
    
        <div class="container-fluid">
                <div id="banner">
        <div class="pull-left">                                <a href="./" id="bannerLeft">
                <h2>Doctest Library</h2>
                </a>
      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>
      
      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
        
                  <li id="publishDate">Last Published: 2012-12-05</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.7.0</li>
                                      
        
              </ul>
      </div>

            <div id="leftColumn" class="sidebar">
        <div class="well">
                
        
                                   <h5>Parent Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Doctest Maven Plugin">Doctest Maven Plugin</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                              <li class="expanded">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                    <ul>
                      <li class="none">
            <strong>RAT Report</strong>
          </li>
              </ul>
        </li>
          </ul>
                      
        
      
          
          <div id="poweredBy">
                                                                                                                  <a href="https://buildhive.cloudbees.com/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy"  alt="Built by Maven" src="http://www.cloudbees.com/sites/default/files/Button-Built-on-CB-1.png"    />
      </a>
                    </div>
        </div>
      </div>
      
      <div id="bodyColumn" class="content">
        <div id="contentBox">
                              
          <div class="section"><h2>RAT (Release Audit Tool) results<a name="RAT_Release_Audit_Tool_results"></a></h2><p>The following document contains the results of <a class="externalLink" href="http://incubator.apache.org/rat/apache-rat-plugin">RAT (Release Audit Tool)</a>.</p><p></p><div class="source"><pre class="prettyprint">
*****************************************************
Summary
-------
Generated at: 2012-12-05T18:53:29+01:00
Notes: 0
Binaries: 0
Archives: 0
Standards: 34

Apache Licensed: 0
Generated Documents: 0

JavaDocs are generated and so license header is optional
Generated files do not required license headers

34 Unknown Licenses

*******************************

Unapproved licenses:

  D:/git/maven-doctest-plugin/doctest/.gitignore
  D:/git/maven-doctest-plugin/doctest/pom.xml
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/AbstractRequestData.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/asserts/HttpResponseAssertUtils.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/asserts/JsonAssertUtils.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/asserts/XmlAssertUtils.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/Doctest.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestClient.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestConfig.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestContext.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestCookieConfig.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestHost.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestOrder.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestRunner.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestStore.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestStores.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/expectations/ExpectHeader.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/expectations/ExpectHeaders.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/expectations/ExpectStatus.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/formatter/EntityFormatter.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/formatter/JsonPrettyPrinter.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/formatter/XmlPrettyPrinter.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/MethodInvoker.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ReflectionUtil.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ReportingCollector.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/RequestBuilder.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/RequestData.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/RequestResultWrapper.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseContext.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseDeserializer.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseDeserializerUtil.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseResultWrapper.java
  D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/SimpleDoctest.java
  D:/git/maven-doctest-plugin/doctest/src/test/java/com/github/mavenplugins/doctest/MyDoctest.java

*******************************

Archives:

*****************************************************
  Files with Apache License headers will be marked AL
  Binary files (which do not require AL headers) will be marked B
  Compressed archives will be marked A
  Notices, licenses etc will be marked N
 !????? D:/git/maven-doctest-plugin/doctest/.gitignore
 !????? D:/git/maven-doctest-plugin/doctest/pom.xml
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/AbstractRequestData.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/asserts/HttpResponseAssertUtils.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/asserts/JsonAssertUtils.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/asserts/XmlAssertUtils.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/Doctest.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestClient.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestConfig.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestContext.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestCookieConfig.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestHost.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestOrder.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestRunner.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestStore.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestStores.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/expectations/ExpectHeader.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/expectations/ExpectHeaders.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/expectations/ExpectStatus.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/formatter/EntityFormatter.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/formatter/JsonPrettyPrinter.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/formatter/XmlPrettyPrinter.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/MethodInvoker.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ReflectionUtil.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ReportingCollector.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/RequestBuilder.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/RequestData.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/RequestResultWrapper.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseContext.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseDeserializer.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseDeserializerUtil.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseResultWrapper.java
 !????? D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/SimpleDoctest.java
 !????? D:/git/maven-doctest-plugin/doctest/src/test/java/com/github/mavenplugins/doctest/MyDoctest.java
 
 *****************************************************
 Printing headers for files without AL header...
 
 
 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/.gitignore
 =======================================================================
/.classpath
/.project
/.settings/
/target/

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/pom.xml
 =======================================================================
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;artifactId&gt;parent&lt;/artifactId&gt;
        &lt;groupId&gt;com.github.mavenplugins.maven-doctest-plugin&lt;/groupId&gt;
        &lt;version&gt;1.7.0&lt;/version&gt;
        &lt;relativePath&gt;..&lt;/relativePath&gt;
    &lt;/parent&gt;
    &lt;name&gt;Doctest Library&lt;/name&gt;
    &lt;artifactId&gt;doctest&lt;/artifactId&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    
    &lt;properties&gt;
        &lt;commons.lang.version&gt;3.1&lt;/commons.lang.version&gt;
        &lt;commons.io.version&gt;2.1&lt;/commons.io.version&gt;
        &lt;jackson.version&gt;2.0.2&lt;/jackson.version&gt;
        &lt;jxpath.version&gt;1.3&lt;/jxpath.version&gt;
        &lt;juel.version&gt;2.2.5&lt;/juel.version&gt;
    &lt;/properties&gt;
    
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;${junit.version}&lt;/version&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;
            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;
            &lt;version&gt;4.2&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;
            &lt;artifactId&gt;httpmime&lt;/artifactId&gt;
            &lt;version&gt;4.2&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.jws&lt;/groupId&gt;
            &lt;artifactId&gt;jsr181-api&lt;/artifactId&gt;
            &lt;version&gt;1.0-MR1&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;
            &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;
            &lt;version&gt;2.2.8&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/AbstractRequestData.java
 =======================================================================
package com.github.mavenplugins.doctest;

import static org.junit.Assert.fail;

import java.io.ByteArrayOutputStream;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.Map;

import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.auth.Credentials;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.entity.ByteArrayEntity;
import org.apache.http.entity.ContentType;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicHeader;
import org.apache.http.params.HttpParams;

import com.fasterxml.jackson.databind.ObjectMapper;

/**
 * An abstract implementation of a request configuration.
 */
public abstract class AbstractRequestData implements RequestData {
    
    /**
     * Gets the uri for a doctest.
     */
    @Override
    public URI getURI() throws URISyntaxException {
        return null;
    }
    
    /**
     * Gets null back.
     */
    @Override
    public String getPath() {
        return null;
    }
    
    /**
     * Gets a null back.
     */
    @Override
    public HttpParams getParameters() {
        return null;
    }
    

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/asserts/HttpResponseAssertUtils.java
 =======================================================================
package com.github.mavenplugins.doctest.asserts;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;

import java.util.regex.Pattern;

import org.apache.http.Header;
import org.apache.http.HttpResponse;

/**
 * This is an utility class used to check http responses.
 */
public class HttpResponseAssertUtils {
    
    /**
     * Checks the response for the existing of the specified header.
     * 
     * @param response the response
     * @param header the string chuck
     */
    public static void assertHeaderExists(HttpResponse response, String header) {
        assertHeaderExists(&quot;expected header '&quot; + header + '\'', response, header);
    }
    
    /**
     * Checks the response for the existing of the specified header.
     * 
     * @param response the response
     * @param header the string chuck
     * @param message the assert message
     */
    public static void assertHeaderExists(String message, HttpResponse response, String header) {
        assertTrue(message, response.containsHeader(header));
    }
    
    /**
     * Checks the response for the containment of the specified header and value.
     * 
     * @param response the response
     * @param header the string chuck
     * @param value the value the header should contain
     */
    public static void assertHeaderContains(HttpResponse response, String header, String value) {
        assertHeaderContains(&quot;expected header '&quot; + header + &quot;' with value '&quot; + value + '\'', response, header, value, 0);
    }
    
    /**
     * Checks the response for the containment of the specified header and value.
     * 

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/asserts/JsonAssertUtils.java
 =======================================================================
package com.github.mavenplugins.doctest.asserts;

import static org.junit.Assert.assertTrue;

import java.util.Iterator;
import java.util.Map;

import org.apache.commons.jxpath.JXPathContext;

import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.node.TreeTraversingParser;

/**
 * This is an utility class used to check the elements of a given JSON node with XPath (using apache jxpath).
 */
public class JsonAssertUtils {
    
    /**
     * the object mapper (threadsafe)
     */
    private static final ObjectMapper MAPPER = new ObjectMapper();
    
    /**
     * Checks if the xpath expression results in at least 1 element.
     * 
     * @param node the json node.
     * @param xpath the expression
     */
    public static void assertExists(JsonNode node, String xpath) throws Exception {
        assertExists(null, node, xpath);
    }
    
    /**
     * Checks if the xpath expression results in at least 1 element.
     * 
     * @param node the json node.
     * @param xpath the expression
     * @param message the assert message
     */
    public static void assertExists(String message, JsonNode node, String xpath) throws Exception {
        assertTrue(message, count(message, node, xpath) &gt; 0);
    }
    
    /**
     * Counts the elements which results from the xpath expression.
     * 
     * @param node the xml document.
     * @param xpath the expression
     * @return Returns -1 if no element was found.

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/asserts/XmlAssertUtils.java
 =======================================================================
package com.github.mavenplugins.doctest.asserts;

import static org.junit.Assert.assertTrue;

import java.util.Map;
import java.util.TreeMap;

import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;

/**
 * This is an utility class used to check the elements of a given XML document with XPath.
 */
public class XmlAssertUtils {
    
    /**
     * the expression cache.
     */
    private static final Map&lt;String, XPathExpression&gt; EXPRESSIONS = new TreeMap&lt;String, XPathExpression&gt;();
    
    /**
     * Checks if the xpath expression results in at least 1 element.
     * 
     * @param document the xml document.
     * @param xpath the expression
     */
    public static void assertExists(Document document, String xpath) throws XPathExpressionException {
        assertExists(null, document, xpath);
    }
    
    /**
     * Checks if the xpath expression results in at least 1 element.
     * 
     * @param document the xml document.
     * @param xpath the expression
     * @param message the assert message
     */
    public static void assertExists(String message, Document document, String xpath) throws XPathExpressionException {
        assertTrue(message, count(message, document, xpath) &gt; 0);
    }
    
    /**
     * Counts the elements which results from the xpath expression.
     * 
     * @param document the xml document.

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/Doctest.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import com.github.mavenplugins.doctest.formatter.EntityFormatter;

/**
 * Annotation for doctests.
 */
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Target(ElementType.METHOD)
public @interface Doctest {
    
    /**
     * Gets the request configuration
     */
    Class&lt;? extends RequestData&gt;[] value();
    
    /**
     * Gets the formatter for the response.
     */
    Class&lt;? extends EntityFormatter&gt; formatter() default EntityFormatter.class;
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestClient.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

/**
 * Apache HTTP client configuration annotation for a doctest.
 */
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Target(ElementType.METHOD)
public @interface DoctestClient {
    
    /**
     * Determines if the HTTP-client should follow redirects.
     */
    boolean handleRedirects() default true;
    
    /**
     * Determines if the HTTP-client should allow relative redirect locations.
     */
    boolean rejectRelativeRedirects() default false;
    
    /**
     * Determines if the HTTP-client should allow cyclic redirects.
     */
    boolean allowCircularRedirects() default true;
    
    /**
     * Determines the max. redirect-count.
     */
    int maxRedirects() default 100;
    
    /**
     * Allow compression or not.
     */
    boolean enableCompression() default true;
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestConfig.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

/**
 * Configuration for doctest execution.
 */
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Target(ElementType.METHOD)
public @interface DoctestConfig {
    
    /**
     * This enum is used to determine which response is given to the test-method.
     */
    public enum AssertionMode {
        /**
         * The first incoming response.
         */
        FIRST,
        /**
         * Any response can be given to the test-method.
         */
        RANDOM,
        /**
         * The last incoming response.
         */
        LAST
    }
    
    /**
     * Determines how many requests should be performed.
     */
    int requestCount() default 1;
    
    /**
     * Determines how many connections (and threads) should be used.
     */
    int maxConcurrentRequests() default 1;
    
    /**
     * Determines the delay between the requests per thread in milliseconds.
     */
    int requestDelay() default 0;
    
    /**

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestContext.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.reflect.Method;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

import org.apache.http.Header;
import org.apache.http.cookie.Cookie;

/**
 * Parameter / Variable holder for doctests.
 */
public class DoctestContext {
    
    /**
     * Stores variables from requests.
     */
    protected Map&lt;String, Object&gt; store = new ConcurrentHashMap&lt;String, Object&gt;();
    
    /**
     * Gets the raw store back.
     */
    public Map&lt;String, Object&gt; getStore() {
        return store;
    }
    
    /**
     * Returns the casted value form the store.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public &lt;T&gt; T getValue(String id) {
        return (T) store.get(id);
    }
    
    /**
     * Stores the values from the response to the value-store (Map).
     */
    public void apply(Method testMethod, ResponseContext ctx) {
        DoctestStores doctestStoresAnnotations = testMethod.getAnnotation(DoctestStores.class);
        DoctestStore doctestStoreAnnotation = testMethod.getAnnotation(DoctestStore.class);
        DoctestStore doctestStores[] = null;
        
        if (doctestStoresAnnotations != null) {
            doctestStores = doctestStoresAnnotations.value();
        } else if (doctestStoreAnnotation != null) {
            doctestStores = new DoctestStore[] { doctestStoreAnnotation };
        }
        
        if (doctestStores != null) {
            for (DoctestStore doctestStore : doctestStores) {

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestCookieConfig.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

/**
 * Annotation for per test-class cookie-handling.
 */
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Target({ ElementType.METHOD, ElementType.TYPE })
public @interface DoctestCookieConfig {
    
    /**
     * The store method for cookies.
     */
    public enum Store {
        /**
         * Shares all cookies for each request with the same cookieConfig name.
         */
        SHARED,
        /**
         * Each request means a new cookie store - no cookie is shared between subsequent requests.
         */
        NEW
    }
    
    /**
     * The name of the config.
     */
    String name();
    
    /**
     * The type of store for each request.
     */
    Store store();
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestHost.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

/**
 * Sets the default host for a doctest class.
 */
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Target({ ElementType.METHOD, ElementType.TYPE })
public @interface DoctestHost {
    
    /**
     * The host - even a DNS entry or an IP Address - defaults to localhost.
     */
    String host() default &quot;localhost&quot;;
    
    /**
     * The port for the doctest - defaults to -1.
     */
    int port() default -1;
    
    /**
     * The scheme / protocol for the doctest - defaults to http.
     */
    String scheme() default &quot;http&quot;;
    
    /**
     * The contextPath of you webapp - defaults to /.
     */
    String contextPath() default &quot;/&quot;;
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestOrder.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

/**
 * Annotation for the order of doctest in the same testclass.
 * A lesser value will be executed earlier that a higher value.
 * Doctest methods without an order will be treated as they have the value 0.
 */
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Target(ElementType.METHOD)
public @interface DoctestOrder {
    
    /**
     * The order value.
     */
    int value() default 0;
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestRunner.java
 =======================================================================
package com.github.mavenplugins.doctest;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.fail;

import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.net.URISyntaxException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;

import org.apache.http.HttpEntity;
import org.apache.http.HttpException;
import org.apache.http.HttpRequest;
import org.apache.http.HttpRequestInterceptor;
import org.apache.http.HttpResponse;
import org.apache.http.auth.AuthScope;
import org.apache.http.client.CookieStore;
import org.apache.http.client.methods.HttpEntityEnclosingRequestBase;
import org.apache.http.client.methods.HttpRequestBase;
import org.apache.http.client.params.ClientPNames;
import org.apache.http.client.protocol.ClientContext;
import org.apache.http.client.protocol.RequestAcceptEncoding;
import org.apache.http.client.protocol.ResponseContentEncoding;
import org.apache.http.entity.BufferedHttpEntity;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.impl.client.BasicCookieStore;
import org.apache.http.impl.client.BasicCredentialsProvider;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpParams;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.apache.http.util.EntityUtils;
import org.junit.runners.BlockJUnit4ClassRunner;
import org.junit.runners.model.FrameworkMethod;
import org.junit.runners.model.InitializationError;
import org.junit.runners.model.Statement;

import com.github.mavenplugins.doctest.DoctestConfig.AssertionMode;
import com.github.mavenplugins.doctest.DoctestCookieConfig.Store;

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestStore.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

/**
 * Basic cross-request store config.
 */
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Target(ElementType.METHOD)
public @interface DoctestStore {
    
    /**
     * The source of value to store.
     */
    public enum Source {
        /**
         * Specifies cookies as source for values - the value assigned is of type org.apache.http.cookie.Cookie.
         */
        COOKIE,
        /**
         * Specifies response-header as source for values - the value assigned is of type org.apache.http.Header.
         */
        HEADER,
        /**
         * Specifies the content as source for values.
         */
        CONTENT
    }
    
    /**
     * The identifier for the header value.
     */
    String id();
    
    /**
     * The expression for the cookie or header (the content don't need an expression for identification) - can be a RegExp.
     */
    String expression() default &quot;&quot;;
    
    /**
     * The source of the value to store.
     */
    Source source() default Source.HEADER;
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/DoctestStores.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

/**
 * Multi {@link DoctestStore} config.
 */
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Target(ElementType.METHOD)
public @interface DoctestStores {
    
    DoctestStore[] value();
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/expectations/ExpectHeader.java
 =======================================================================
package com.github.mavenplugins.doctest.expectations;

/**
 * A single header (key / value) representation.
 */
public @interface ExpectHeader {
    
    /**
     * The name of the header.
     */
    String name();
    
    /**
     * A regExp used to determine the correct header value.
     */
    String content() default &quot;&quot;;
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/expectations/ExpectHeaders.java
 =======================================================================
package com.github.mavenplugins.doctest.expectations;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

/**
 * A method annotation used to automatically verify the correct headers.
 */
@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface ExpectHeaders {
    
    /**
     * the headers to verify.
     */
    ExpectHeader[] value();
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/expectations/ExpectStatus.java
 =======================================================================
package com.github.mavenplugins.doctest.expectations;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

/**
 * A method annotation used to automatically verify the correct response code.
 */
@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface ExpectStatus {
    
    /**
     * The http response status code.
     */
    int value();
    
    /**
     * A regExp representing the response message.
     */
    String message() default &quot;&quot;;
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/formatter/EntityFormatter.java
 =======================================================================
package com.github.mavenplugins.doctest.formatter;

import org.apache.http.HttpEntity;

/**
 * An EntityFormatter is responsible for formatting a response.
 */
public interface EntityFormatter {
    
    /**
     * Actually formats the given responseData.
     * 
     * @param entity The entity where the response came from.
     * @param responseData The raw response data - some Entity-objects doesn't support multiple read operations.
     */
    String format(HttpEntity entity, byte[] responseData) throws Exception;
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/formatter/JsonPrettyPrinter.java
 =======================================================================
package com.github.mavenplugins.doctest.formatter;

import org.apache.http.HttpEntity;

import com.fasterxml.jackson.core.util.DefaultPrettyPrinter;
import com.fasterxml.jackson.databind.ObjectMapper;

/**
 * Formats the response as a pretty printed JSON.
 */
public class JsonPrettyPrinter implements EntityFormatter {
    
    /**
     * The JSON mapper (threadsafe) used to stringify the response.
     */
    protected ObjectMapper mapper = new ObjectMapper();
    
    /**
     * Returns an empty string if the response data is empty.
     */
    public String format(HttpEntity entity, byte[] responseData) throws Exception {
        if (responseData != null &amp;&amp; responseData.length &gt; 0) {
            return mapper.writer(new DefaultPrettyPrinter()).writeValueAsString(mapper.readTree(responseData));
        }
        return &quot;&quot;;
    }
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/formatter/XmlPrettyPrinter.java
 =======================================================================
package com.github.mavenplugins.doctest.formatter;

import java.io.ByteArrayInputStream;
import java.io.StringWriter;

import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.TransformerFactoryConfigurationError;
import javax.xml.transform.stream.StreamResult;
import javax.xml.transform.stream.StreamSource;

import org.apache.http.HttpEntity;

/**
 * Formats the given xml data using indentation.
 */
public class XmlPrettyPrinter implements EntityFormatter {
    
    /**
     * The standard XML formatter.
     */
    protected Transformer transformer;
    
    /**
     * Sets up the transformer.
     */
    public XmlPrettyPrinter() throws TransformerConfigurationException, TransformerFactoryConfigurationError {
        transformer = TransformerFactory.newInstance().newTransformer();
        transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);
        transformer.setOutputProperty(OutputKeys.METHOD, &quot;xml&quot;);
    }
    
    /**
     * Returns an empty string if the response data is empty.
     */
    public String format(HttpEntity entity, byte[] responseData) throws Exception {
        StringWriter writer = new StringWriter();
        if (responseData != null &amp;&amp; responseData.length &gt; 0) {
            transformer.transform(new StreamSource(new ByteArrayInputStream(responseData)), new StreamResult(writer));
        }
        return writer.toString();
    }
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/MethodInvoker.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.io.IOException;

import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpResponse;
import org.junit.runners.model.FrameworkMethod;
import org.xml.sax.SAXException;

import com.fasterxml.jackson.core.JsonProcessingException;

/**
 * Util for invoking the test-method.
 */
public class MethodInvoker {
    
    /**
     * Cross-request store.
     */
    protected DoctestContext store;
    
    /**
     * Initiates the util with the specified test class.
     */
    public void init(DoctestContext store) {
        this.store = store;
    }
    
    /**
     * Actually runs the test method.
     */
    protected void invokeTestMethod(final FrameworkMethod method, final Object test, ResponseContext ctx)
            throws Throwable, SAXException, IOException, ParserConfigurationException, JsonProcessingException {
        HttpResponse response = ctx.getResponse();
        Class&lt;?&gt;[] methodParameters = method.getMethod().getParameterTypes();
        
        if (methodParameters.length == 1) {
            method.invokeExplosively(test, response);
        } else if (methodParameters.length == 2) {
            if (DoctestContext.class.isAssignableFrom(methodParameters[1])) {
                method.invokeExplosively(test, response, store);
            } else {
                method.invokeExplosively(test, response, ctx.getEntity());
            }
        } else if (methodParameters.length == 3) {
            if (DoctestContext.class.isAssignableFrom(methodParameters[1])) {
                method.invokeExplosively(test, response, store, ctx.getEntity());
            } else {
                method.invokeExplosively(test, response, ctx.getEntity(), store);

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ReflectionUtil.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.reflect.Constructor;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Modifier;

public class ReflectionUtil {
    
    /**
     * The doctest class.
     */
    protected Class&lt;?&gt; testClass;
    
    /**
     * Initiates the util with the specified test class.
     */
    public void init(Class&lt;?&gt; testClass) {
        this.testClass = testClass;
    }
    
    /**
     * Instantiates the given type.
     */
    protected &lt;T&gt; T instance(Object test, Class&lt;T&gt; type) throws InstantiationException, IllegalAccessException,
            IllegalArgumentException, InvocationTargetException, SecurityException, NoSuchMethodException {
        Constructor&lt;T&gt; constructor;
        
        if (type == null || type.isInterface() || Modifier.isAbstract(type.getModifiers())) {
            return null;
        }
        
        if (type.getEnclosingClass() != null &amp;&amp; type.getEnclosingClass().equals(testClass)
                &amp;&amp; !Modifier.isStatic(type.getModifiers())) {
            constructor = type.getDeclaredConstructor(testClass);
            
            if (!constructor.isAccessible()) {
                constructor.setAccessible(true);
            }
            
            return constructor.newInstance(test);
        } else {
            constructor = type.getDeclaredConstructor();
            
            if (!constructor.isAccessible()) {
                constructor.setAccessible(true);
            }
            
            return constructor.newInstance();
        }
    }

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ReportingCollector.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.io.File;
import java.io.IOException;
import java.io.PrintStream;
import java.lang.reflect.InvocationTargetException;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.ArrayList;
import java.util.List;
import java.util.prefs.Preferences;

import org.apache.http.Header;
import org.apache.http.HttpRequest;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpEntityEnclosingRequestBase;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpParamsNames;
import org.junit.runners.model.FrameworkMethod;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.github.mavenplugins.doctest.formatter.EntityFormatter;

public class ReportingCollector {
    
    /**
     * An empty array for copying purpose.
     */
    private static final String[] EMPTY_STRING_ARRAY = new String[] {};
    /**
     * The java backstore variable for the results of the doctests.
     */
    public static final String RESULT_PATH = &quot;doctest.result.path&quot;;
    
    /**
     * The java back-store.
     */
    protected Preferences prefs = Preferences.userNodeForPackage(DoctestRunner.class);
    /**
     * the directory for the test results.
     */
    protected File path = new File(prefs.get(RESULT_PATH, &quot;./target/doctests/&quot;));
    /**
     * The doctest class.
     */
    protected Class&lt;?&gt; testClass;
    /**
     * Util for instancing classes.
     */
    protected ReflectionUtil reflectionUtil = new ReflectionUtil();

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/RequestBuilder.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.reflect.AnnotatedElement;
import java.lang.reflect.Method;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.Map;

import javax.el.ELContext;
import javax.el.ExpressionFactory;
import javax.el.ValueExpression;

import org.apache.http.Header;
import org.apache.http.client.methods.HttpDelete;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpHead;
import org.apache.http.client.methods.HttpOptions;
import org.apache.http.client.methods.HttpPatch;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpPut;
import org.apache.http.client.methods.HttpRequestBase;
import org.apache.http.client.methods.HttpTrace;
import org.apache.http.message.BasicHeader;
import org.junit.runners.model.FrameworkMethod;

import de.odysseus.el.util.SimpleContext;

/**
 * HelperClass for building request objects.
 */
public class RequestBuilder {
    
    /**
     * The default test uri.
     */
    protected URI defaultURI;
    /**
     * Util for instancing classes.
     */
    protected ReflectionUtil reflectionUtil = new ReflectionUtil();
    /**
     * The factory for expressions.
     */
    protected ExpressionFactory factory;
    
    /**
     * Initiates the default URI.
     */
    public void init(Class&lt;?&gt; testClass) throws URISyntaxException {
        defaultURI = getURI(testClass);

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/RequestData.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.net.URI;
import java.net.URISyntaxException;

import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.auth.Credentials;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpParams;

/**
 * Represents the configuration for a doctest request.
 */
public interface RequestData {
    
    /**
     * Gets the uri for a doctest.
     */
    URI getURI() throws URISyntaxException;
    
    /**
     * Gets the string representation for a http method.
     */
    String getMethod();
    
    /**
     * Gets the path to the endpoint you want to test (need to start with /) - only applied if a {@link DoctestHost} is present at class or method level.
     */
    String getPath();
    
    /**
     * Gets the request parameters.
     */
    HttpParams getParameters();
    
    /**
     * Gets the request headers.
     */
    Header[] getHeaders();
    
    /**
     * Gets the entity (form data) for post or put requests.
     */
    HttpEntity getHttpEntity();
    
    /**
     * Gets the authentication credentials.
     */
    Credentials getCredentials();

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/RequestResultWrapper.java
 =======================================================================
package com.github.mavenplugins.doctest;

/**
 * A wrapper for the request, which stores the states for the later report plugin.
 */
public class RequestResultWrapper {
    
    protected String path;
    protected String requestLine;
    protected String[] header;
    protected String[] paremeters;
    protected String entity;
    
    public String getPath() {
        return path;
    }
    
    public void setPath(String path) {
        this.path = path;
    }
    
    public String getRequestLine() {
        return requestLine;
    }
    
    public void setRequestLine(String requestLine) {
        this.requestLine = requestLine;
    }
    
    public String[] getHeader() {
        return header;
    }
    
    public void setHeader(String[] header) {
        this.header = header;
    }
    
    public String[] getParemeters() {
        return paremeters;
    }
    
    public void setParemeters(String[] paremeters) {
        this.paremeters = paremeters;
    }
    
    public String getEntity() {
        return entity;
    }
    
    public void setEntity(String entity) {

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseContext.java
 =======================================================================
package com.github.mavenplugins.doctest;

import org.apache.http.HttpResponse;
import org.apache.http.client.CookieStore;
import org.apache.http.client.HttpClient;
import org.apache.http.protocol.HttpContext;

/**
 * ThreadContext for responses.
 */
public class ResponseContext {
    
    /**
     * The http response;
     */
    HttpResponse response = null;
    /**
     * The response payload.
     */
    byte[] responseData = null;
    /**
     * The response payload as object.
     */
    Object entity = null;
    /**
     * The client with which the request was executed.
     */
    HttpClient httpClient;
    /**
     * The context object for the request.
     */
    HttpContext httpContext;
    /**
     * The cookie store for the request.
     */
    CookieStore cookieStore;
    
    public CookieStore getCookieStore() {
        return cookieStore;
    }
    
    public void setCookieStore(CookieStore cookieStore) {
        this.cookieStore = cookieStore;
    }
    
    public HttpContext getHttpContext() {
        return httpContext;
    }
    
    public void setHttpContext(HttpContext httpContext) {

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseDeserializer.java
 =======================================================================
package com.github.mavenplugins.doctest;

/**
 * Turns a response into an object.
 */
public interface ResponseDeserializer {
    
    /**
     * Returns the object represented through the data.
     */
    Object deserialize(byte[] data, Class&lt;?&gt; valueType) throws Exception;
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseDeserializerUtil.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.io.ByteArrayInputStream;
import java.lang.reflect.Method;
import java.util.HashMap;
import java.util.Map;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.Unmarshaller;
import javax.xml.parsers.DocumentBuilderFactory;

import org.apache.http.Header;
import org.apache.http.HttpHeaders;
import org.apache.http.HttpResponse;
import org.apache.http.entity.ContentType;
import org.w3c.dom.Document;

import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;

public class ResponseDeserializerUtil {
    
    /**
     * XML factory.
     */
    private static final DocumentBuilderFactory FACTORY = DocumentBuilderFactory.newInstance();
    
    /**
     * A mapping with content-types to {@link ResponseDeserializer} objects.
     */
    protected Map&lt;String, ResponseDeserializer&gt; responseDeserializers = new HashMap&lt;String, ResponseDeserializer&gt;();
    /**
     * A mapping with content-types to classes.
     */
    protected Map&lt;String, Class&lt;?&gt;&gt; responseTypes = new HashMap&lt;String, Class&lt;?&gt;&gt;();
    /**
     * The json mapper.
     */
    protected ObjectMapper jsonMapper = new ObjectMapper();
    
    /**
     * Initiates the util with the specified test class.
     */
    public void init() {
        ResponseDeserializer jsonDeserializer = new ResponseDeserializer() {
            
            @Override
            public Object deserialize(byte[] data, Class&lt;?&gt; valueType) throws Exception {
                return jsonMapper.readValue(data, valueType);
            }

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/ResponseResultWrapper.java
 =======================================================================
package com.github.mavenplugins.doctest;

/**
 * A wrapper for the response, which stores the states for the later report plugin.
 */
public class ResponseResultWrapper {
    
    protected String statusLine;
    protected String[] header;
    protected String[] paremeters;
    protected String entity;
    
    public String getStatusLine() {
        return statusLine;
    }
    
    public void setStatusLine(String responseLine) {
        statusLine = responseLine;
    }
    
    public String[] getHeader() {
        return header;
    }
    
    public void setHeader(String[] header) {
        this.header = header;
    }
    
    public String[] getParemeters() {
        return paremeters;
    }
    
    public void setParemeters(String[] paremeters) {
        this.paremeters = paremeters;
    }
    
    public String getEntity() {
        return entity;
    }
    
    public void setEntity(String entity) {
        this.entity = entity;
    }
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/main/java/com/github/mavenplugins/doctest/SimpleDoctest.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import org.apache.http.client.methods.HttpGet;

import com.github.mavenplugins.doctest.formatter.EntityFormatter;

/**
 * Annotation for simple doctests.
 */
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Target(ElementType.METHOD)
public @interface SimpleDoctest {
    
    /**
     * Gets the request url.
     */
    String value();
    
    /**
     * Gets the request headers (header/value pairs).
     */
    String[] header() default {};
    
    /**
     * Gets the request method.
     */
    String method() default HttpGet.METHOD_NAME;
    
    /**
     * Gets the formatter for the response.
     */
    Class&lt;? extends EntityFormatter&gt; formatter() default EntityFormatter.class;
    
}

 =======================================================================
 ==D:/git/maven-doctest-plugin/doctest/src/test/java/com/github/mavenplugins/doctest/MyDoctest.java
 =======================================================================
package com.github.mavenplugins.doctest;

import java.net.URI;
import java.net.URISyntaxException;

import javax.jws.WebService;
import javax.xml.ws.Endpoint;

import org.apache.http.HttpResponse;
import org.junit.After;
import org.junit.Before;
import org.junit.runner.RunWith;
import org.w3c.dom.Document;

import com.github.mavenplugins.doctest.expectations.ExpectHeader;
import com.github.mavenplugins.doctest.expectations.ExpectHeaders;
import com.github.mavenplugins.doctest.expectations.ExpectStatus;
import com.github.mavenplugins.doctest.formatter.XmlPrettyPrinter;

@RunWith(DoctestRunner.class)
public class MyDoctest {
    
    class Resource1 extends AbstractRequestData {
        
        public URI getURI() throws URISyntaxException {
            return new URI(&quot;http://localhost:8080/someService?wsdl&quot;);
        }
        
    }
    
    /*
     * SERVER FOR TESTING (JUST AN EXAMPLE)
     */
    
    @WebService
    public static class SimpleService {
        
        public int multiply(int x, int y) {
            return x * y;
        }
        
    }
    
    Endpoint endpoint;
    
    @Before
    public void startServer() throws Exception {
        SimpleService service = new SimpleService();
        endpoint = Endpoint.publish(&quot;http://localhost:8080/someService&quot;, service);
    }
</pre></div></div>
                  </div>
      </div>
    </div>

    <footer class="footer">
            <div class="container-fluid">
              <div class="row span16">Copyright &copy;                   2012.
          All Rights Reserved.      
        
      </div>

                      </div>
    </footer>
  </body>
</html>
